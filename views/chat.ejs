<!doctype html>
<html>
  <head>
    <title>Tela de Chat</title>
  </head>
  <body>
    <input data-testid="nickname-box" id="nicknameBox" name="Nick name box" type="text">
    <input data-testid="nickname-button" type="button" value="SaveNickname">
    
    <ul id='telaMensagens'>
      Tela de mensagens
      <% dataToRender.messages.forEach((message) => { %>
        <li data-testid="message"><%= message %></li>
      <% }) %>
    </ul>

    <ul id='telaOnlineUsers'>
      Tela de usu√°rios
      <% dataToRender.users.forEach(({ onlineUser }) => { %>
        <li data-testid="online-user"><%= onlineUser %></li>
      <% }) %>
    </ul>

    <input data-testid="message-box" id="messageBox" name="Message box" type="text">
    <input data-testid="send-button" type="button" value="sendMessage">
  </body>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const telaOnlineUsers = document.querySelector('#telaOnlineUsers');
    
    function createListUser(user) {
      const { onlineUser } = user;
      const li = document.createElement('li');
      li.setAttribute('data-testid', 'online-user');
      li.innerHTML = onlineUser;
      return li;
    }
    
    const client = window.io();
    
    client.on('insertOnlineUser', (user) => {
      const newUser = createListUser(user);
      telaOnlineUsers.appendChild(newUser);
    });
  </script>
</html>
