(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(1357)}])},1357:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSP:function(){return h},default:function(){return g}});var r,i=e(5893),u=e(7294),a=e(1043),s=e(1131),o=new Uint8Array(16);function c(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var f=function(t){return"string"===typeof t&&d.test(t)},l=[],m=0;m<256;++m)l.push((m+256).toString(16).substr(1));var p=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(l[t[n+0]]+l[t[n+1]]+l[t[n+2]]+l[t[n+3]]+"-"+l[t[n+4]]+l[t[n+5]]+"-"+l[t[n+6]]+l[t[n+7]]+"-"+l[t[n+8]]+l[t[n+9]]+"-"+l[t[n+10]]+l[t[n+11]]+l[t[n+12]]+l[t[n+13]]+l[t[n+14]]+l[t[n+15]]).toLowerCase();if(!f(e))throw TypeError("Stringified UUID is invalid");return e};var v=function(t,n,e){var r=(t=t||{}).random||(t.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var i=0;i<16;++i)n[e+i]=r[i];return n}return p(r)};var h=!0,g=function(){var t=(0,a.I0)(),n=(0,u.useState)(""),e=n[0],r=n[1],o=(0,u.useState)(""),c=o[0],d=o[1],f=(0,a.v9)((function(t){return t.socket})),l=(0,a.v9)((function(t){return t.messages})),m=(0,a.v9)((function(t){return t.user})).nickname,p=(0,a.v9)((function(t){return t.users})).connected;return(0,u.useEffect)((function(){f.on&&f.emit("getConnectedUsers")}),[f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{children:"Chat"}),(0,i.jsx)("h3",{children:"Usu\xe1rios conectados"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{"data-testid":"online-user",children:m}),Object.values(p).filter((function(t){var n=t.id;return f.id!==n})).map((function(t){var n=t.id,e=t.nickname;return(0,i.jsx)("li",{"data-testid":"online-user",children:e.substring(0,16)},n)}))]}),(0,i.jsx)("h3",{children:"Mensagens"}),(0,i.jsx)("ul",{children:l.map((function(t){return(0,i.jsx)("li",{"data-testid":"message",children:t},v())}))}),(0,i.jsxs)("form",{onSubmit:function(n){n.preventDefault(),f.emit("setNickname",c),t((0,s.changeNickname)(c)),d("")},children:[(0,i.jsx)("input",{"data-testid":"nickname-box",onChange:function(t){var n=t.target;return d(n.value)},type:"text",value:c}),(0,i.jsx)("button",{"data-testid":"nickname-button",type:"submit",children:"Salvar"})]}),(0,i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),f.emit("message",{chatMessage:e,nickname:m}),r("")},children:[(0,i.jsx)("input",{"data-testid":"message-box",type:"text",onChange:function(t){var n=t.target;return r(n.value)},value:e}),(0,i.jsx)("button",{"data-testid":"send-button",type:"submit",children:"Enviar"})]})]})}}},function(t){t.O(0,[774,888,179],(function(){return n=8581,t(t.s=n);var n}));var n=t.O();_N_E=n}]);