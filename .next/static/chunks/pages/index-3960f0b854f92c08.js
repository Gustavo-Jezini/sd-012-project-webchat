(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(1357)}])},1357:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSP:function(){return h},default:function(){return g}});var r,u=e(5893),a=e(7294),i=e(6628),o=e(1131),s=new Uint8Array(16);function c(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)}var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var d=function(t){return"string"===typeof t&&f.test(t)},p=[],l=0;l<256;++l)p.push((l+256).toString(16).substr(1));var m=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(p[t[n+0]]+p[t[n+1]]+p[t[n+2]]+p[t[n+3]]+"-"+p[t[n+4]]+p[t[n+5]]+"-"+p[t[n+6]]+p[t[n+7]]+"-"+p[t[n+8]]+p[t[n+9]]+"-"+p[t[n+10]]+p[t[n+11]]+p[t[n+12]]+p[t[n+13]]+p[t[n+14]]+p[t[n+15]]).toLowerCase();if(!d(e))throw TypeError("Stringified UUID is invalid");return e};var v=function(t,n,e){var r=(t=t||{}).random||(t.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var u=0;u<16;++u)n[e+u]=r[u];return n}return m(r)};var h=!0,g=(0,i.$j)((function(t){return t}))((function(){var t=(0,i.I0)(),n=(0,a.useState)(""),e=n[0],r=n[1],s=(0,a.useState)(""),c=s[0],f=s[1],d=(0,i.v9)((function(t){return t.socket})),p=(0,i.v9)((function(t){return t.messages})),l=(0,i.v9)((function(t){return t.user})).nickname;return(0,a.useEffect)((function(){d.on("message",(function(n){return t((0,o.newMessage)(n))}))}),[d]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{children:"Chat"}),(0,u.jsxs)("h2",{children:["User: ",(0,u.jsx)("span",{"data-testid":"online-user",children:l})]}),(0,u.jsx)("ul",{children:p&&p.map((function(t){return(0,u.jsx)("li",{"data-testid":"message",children:t},v())}))}),(0,u.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t((0,o.changeNickname)(c))},children:[(0,u.jsx)("input",{"data-testid":"nickname-box",onChange:function(t){var n=t.target;return f(n.value)},type:"text",value:c}),(0,u.jsx)("button",{"data-testid":"nickname-button",type:"submit",children:"Salvar"})]}),(0,u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),d.emit("message",{chatMessage:e,nickname:l})},children:[(0,u.jsx)("input",{"data-testid":"message-box",type:"text",onChange:function(t){var n=t.target;return r(n.value)},value:e}),(0,u.jsx)("button",{"data-testid":"send-button",type:"submit",children:"Enviar"})]})]})}))}},function(t){t.O(0,[774,888,179],(function(){return n=8581,t(t.s=n);var n}));var n=t.O();_N_E=n}]);